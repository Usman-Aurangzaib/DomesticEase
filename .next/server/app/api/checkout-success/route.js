"use strict";(()=>{var e={};e.id=6991,e.ids=[6991],e.modules={38013:e=>{e.exports=require("mongodb")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},73837:e=>{e.exports=require("util")},21341:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>m,originalPathname:()=>x,patchFetch:()=>C,requestAsyncStorage:()=>h,routeModule:()=>l,serverHooks:()=>v,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>k});var o={};r.r(o),r.d(o,{GET:()=>d});var s=r(95419),c=r(69108),a=r(99678),n=r(77638),i=r(38013),u=r(98984);let p=r(26505)("sk_test_51NOGC42KGHLgqKUzPcgCe6vGFHmY36skDkl6bmywCEMXutpwDbU4roa6GsgevPveCZCDtvcVoB8YNWD92r8Jco5400HiivdFAr"),d=async e=>{let t=e.nextUrl.searchParams.get("session_id");t||console.error("Session ID not provided");try{let e=(await p.checkout.sessions.retrieve(t)).metadata;console.log({metadata:e});let{database:r,client:o}=await (0,n.Z)(),s=r.collection("order");return await s.updateOne({_id:new i.ObjectId(e.orderId)},{$set:{paid:!0}}),o.close(),u.NextResponse.json({success:"go back to the app"})}catch(e){console.error("Error retrieving session:",e),console.error("Errr")}},l=new s.AppRouteRouteModule({definition:{kind:c.x.APP_ROUTE,page:"/api/checkout-success/route",pathname:"/api/checkout-success",filename:"route",bundlePath:"app/api/checkout-success/route"},resolvedPagePath:"C:\\Users\\DELL\\Desktop\\DOMESTIC-EASE\\src\\app\\api\\checkout-success\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:g,serverHooks:v,headerHooks:m,staticGenerationBailout:k}=l,x="/api/checkout-success/route";function C(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:g})}},77638:(e,t,r)=>{r.d(t,{Z:()=>s});var o=r(38013);let s=async()=>{let e=new o.MongoClient("mongodb+srv://basitdev:Z8TTCBtR5z0z76QC@domestic-ease-cluster.ygthspq.mongodb.net/");try{await e.connect();let t=e.db("domestic-ease-client");return console.log("Connected to MongoDB"),{client:e,database:t}}catch(e){console.error(e)}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[1638,2791,6505],()=>r(21341));module.exports=o})();