"use strict";(()=>{var e={};e.id=6224,e.ids=[6224],e.modules={38013:e=>{e.exports=require("mongodb")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},9523:e=>{e.exports=require("dns")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},64107:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>b,originalPathname:()=>y,patchFetch:()=>w,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>g});var r={};a.r(r),a.d(r,{POST:()=>u});var o=a(95419),s=a(69108),n=a(99678),i=a(59201),c=a(98984),l=a(68140);let u=async e=>{let t=await e.json(),a=t?.email;console.log({email:a});let r=await (0,i.bG)(a),o=r?.password;if(!r)return console.log("Email not found"),c.NextResponse.json({success:!1,message:"Email not found"});try{let e=l.createTransport({service:"Gmail",auth:{user:"usmanjutt8132@gmail.com",pass:"ncsyaivxpcudqrye"}}),t={from:"usmanjutt8132@gmail.com",to:a,subject:"Confirm your email - Domestic ease",html:`Click here to confirm your email -> <a href='http://localhost:3000/approve?email=${encodeURIComponent(a)}&password=${encodeURIComponent(o)}'>CONFIRM</a>`};return await e.sendMail(t),c.NextResponse.json({success:!0,message:"Email sent successfully"})}catch(e){return console.log(e),c.NextResponse.json({success:!1,message:"Email not sent"})}},p=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/approve-mail/route",pathname:"/api/approve-mail",filename:"route",bundlePath:"app/api/approve-mail/route"},resolvedPagePath:"C:\\Users\\DELL\\Desktop\\DOMESTIC-EASE\\src\\app\\api\\approve-mail\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:f,serverHooks:m,headerHooks:b,staticGenerationBailout:g}=p,y="/api/approve-mail/route";function w(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}},59201:(e,t,a)=>{a.d(t,{bG:()=>f});var r=a(31542);a(68616);var o=a(77638),s=a(42053);let n=async e=>{let{database:t,client:a}=await (0,o.Z)(),r=t.collection("user"),s=await r.findOne({email:e});return a.close(),s},i=(0,r.j)("dab07b5958eb4650ece771bcba69be64c61f2338",c);async function c(e){let{database:t,client:a}=await (0,o.Z)(),r=t.collection("user");if(await n(e.email))throw"User already exists";let s=await r.insertOne(e);return console.log({user:s}),a.close(),JSON.parse(JSON.stringify(s))}let l=(0,r.j)("6b01299afed5f0665d014a4af2855e7649356ed0",u);async function u(e){let{database:t,client:a}=await (0,o.Z)(),r=t.collection("user");if(await n(e.email))throw"User already exists";let s=await r.insertOne({...e,type:"service",approved:!1});return console.log({user:s}),a.close(),JSON.parse(JSON.stringify(s))}let p=(0,r.j)("c5daaae2c8a269884ec101003cee7f2605e1150e",d);async function d(e,t){let{database:a,client:r}=await (0,o.Z)(),s=a.collection("user"),n=await s.findOne({email:e,password:t});return console.log({user:n}),JSON.parse(JSON.stringify(n))}let f=(0,r.j)("42add083530816ef53685d2bc3bb9dc9ac390d43",m);async function m(e){let{database:t,client:a}=await (0,o.Z)(),r=t.collection("user"),s=await r.findOne({email:e});return console.log({user:s}),a.close(),JSON.parse(JSON.stringify(s))}let b=(0,r.j)("d48555850f75bbc8331ae2649fda238e04723775",g);async function g(e,t){let{database:a,client:r}=await (0,o.Z)(),s=a.collection("user"),n=await s.updateOne({email:e},{$set:t});return console.log({user:n}),r.close(),JSON.parse(JSON.stringify(n))}let y=(0,r.j)("9c58d2425d31d23d3f8e3fede0e025a9a16aaf00",w);async function w(){let{database:e,client:t}=await (0,o.Z)(),a=e.collection("user"),r=await a.find({type:{$ne:"service"}}).toArray();return console.log({user:r}),t.close(),JSON.parse(JSON.stringify(r))}let x=(0,r.j)("7691509385738a31cc2b30475603815741bc16de",O);async function O(){let{database:e,client:t}=await (0,o.Z)(),a=e.collection("user"),r=await a.find({type:"service"}).toArray();return console.log({user:r}),t.close(),JSON.parse(JSON.stringify(r))}let v=(0,r.j)("fb901ff69281c7c2704cbf39121f1ae1992b3848",j);async function j(e){let{database:t,client:a}=await (0,o.Z)(),r=t.collection("user"),s=await r.deleteOne({email:e});return console.log({user:s}),a.close(),JSON.parse(JSON.stringify(s))}(0,s.h)([i,l,p,f,b,y,x,v]),(0,r.j)("0f4d132821da063e73dee58ac0271c6b416dbe08",i),(0,r.j)("2727ff5f424dc69ed443f01d95876fa2ea974c6d",l),(0,r.j)("830a08f0b4898aa4d63fb94229055f2fce3e3f71",p),(0,r.j)("e80969a57efceefee6a8a65908e1e314fe49a2a0",f),(0,r.j)("ae483d5d3c1e2e20ae95a2933fab40df31f7512a",b),(0,r.j)("a8dbe559b9e3e82e687aabcfe7c2bab9f020568c",y),(0,r.j)("59975b62b53c5f40ad91cc17f309d881c82b0209",x),(0,r.j)("9c3fff7bc34ea049ee987a3faad47491f6dcc742",v)},77638:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(38013);let o=async()=>{let e=new r.MongoClient("mongodb+srv://basitdev:Z8TTCBtR5z0z76QC@domestic-ease-cluster.ygthspq.mongodb.net/");try{await e.connect();let t=e.db("domestic-ease-client");return console.log("Connected to MongoDB"),{client:e,database:t}}catch(e){console.error(e)}}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1638,2791,8140,9222],()=>a(64107));module.exports=r})();