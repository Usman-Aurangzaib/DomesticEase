"use strict";exports.id=4228,exports.ids=[4228],exports.modules={27105:(e,t,r)=>{r.d(t,{AU:()=>o,Cs:()=>l,LU:()=>c,LV:()=>n,Wv:()=>a,co:()=>i,zk:()=>d}),r(13664);var s=r(28371),i=(0,s.$)("87811bda8aab4f2c40c29da1aea7294596397243"),a=(0,s.$)("2b5f27bb77a493a536153c35bc92da67448bbf00"),n=(0,s.$)("604a5f53a386e7d884ceb4e637d9db4dde083582"),o=(0,s.$)("cebd14fc41c69c7d1b4b0d283ed367f82ad15ead"),d=(0,s.$)("aa60c369216bcb2edf713d1d760271767fc5a6b6"),c=(0,s.$)("108866074a754ba62450c20513e6d7aa9f0ae0d5"),l=(0,s.$)("0e2da7323e643dc8502d779a9be0ee215a5adedb")},27938:(e,t,r)=>{r.d(t,{Z:()=>x});var s=r(95344),i=r(27105),a=r(47283),n=r(18612),o=r(63120),d=r(39792),c=r(52378),l=r(34548),u=r(44730),h=r(96442),f=r(63085),b=r(72684),p=r(26274),g=r(31296),m=r(8428);let x=function({order:e,setNull:t}){let r=(0,m.useRouter)(),x=(0,p.NL)(),{mutate:O,isPending:v}=(0,g.D)({mutationFn:async t=>{console.log({order:e});let s=await (0,i.Cs)({worker:e.worker,dateTime:e.dateTime},t);return x.invalidateQueries({queryKey:["orders","worker"]}),r.refresh(),s}});return e?s.jsx(s.Fragment,{children:(0,s.jsxs)(a.u_,{onClose:t,isOpen:!0,isCentered:!0,children:[s.jsx(n.Z,{}),(0,s.jsxs)(o.h,{children:[s.jsx(d.x,{children:"Order"}),s.jsx(c.o,{}),(0,s.jsxs)(l.f,{children:[(0,s.jsxs)(u.k,{background:"gray.100",padding:2,borderRadius:4,gap:2,flexDir:"column",children:[s.jsx(h.x,{fontSize:"large",fontWeight:"bold",children:"Order Information"}),(0,s.jsxs)(h.x,{children:["Order Name: ",e.name]}),(0,s.jsxs)(h.x,{children:["Order Status: ",e.status]}),(0,s.jsxs)(h.x,{children:["Order Phone: ",e.phone]}),(0,s.jsxs)(h.x,{children:["Order Date: ",e.dateTime.split("T")[0]]}),(0,s.jsxs)(h.x,{children:["Order Time: ",e.dateTime.split("T")[1]]}),(0,s.jsxs)(h.x,{children:["Order Worker: ",e.worker]}),(0,s.jsxs)(h.x,{children:["Order Service: ",e.service]}),(0,s.jsxs)(h.x,{children:["Order Extra: ",e.extra]})]}),(0,s.jsxs)(h.x,{marginY:2,marginX:"auto",children:["Order Paid: ",e.paid?"PAID":"NOT PAID"]}),e.image?(0,s.jsxs)(s.Fragment,{children:[s.jsx(h.x,{fontWeight:"bold",fontSize:"medium",children:"VIDEO"}),s.jsx("video",{src:`/api/get-image/${e.image}`,controls:!0,width:"200px",height:"200px"})]}):s.jsx("p",{children:"No video"}),s.jsx(f.z,{width:"100%",marginY:3,colorScheme:"blue",onClick:()=>window.open(`/location/${e._id}`,"_blank"),children:"View location"}),"pending"===e.status&&(0,s.jsxs)(u.k,{gap:2,children:[s.jsx(f.z,{onClick:()=>O("completed"),isLoading:v,marginTop:1,w:"100%",colorScheme:"teal",children:"Complete"}),s.jsx(f.z,{onClick:()=>O("cancelled"),isLoading:v,marginTop:1,w:"100%",colorScheme:"red",children:"Cancel"})]})]}),s.jsx(b.m,{children:s.jsx(f.z,{w:"100%",onClick:t,children:"Close"})})]})]})}):s.jsx(s.Fragment,{})}},96790:(e,t,r)=>{r.r(t),r.d(t,{$$ACTION_0:()=>d,$$ACTION_1:()=>l,$$ACTION_2:()=>h,$$ACTION_3:()=>b,$$ACTION_4:()=>g,$$ACTION_5:()=>x,$$ACTION_6:()=>v,createOrder:()=>c,findService:()=>o,getAllOrders:()=>f,getOrder:()=>O,getOrders:()=>u,getSerivcesOrders:()=>p,updateOrder:()=>m});var s=r(60398);r(75811);var i=r(38013),a=r(20915),n=r(46893);let o=(0,s.registerServerReference)("88a430642403f7c4f951cddd695a810686a83667",d);async function d(e,t){let{database:r,client:s}=await (0,a.default)(),i=r.collection("user");for(let a of(console.log(e),await i.find({$and:[{type:"service"},{service:e},{approved:!0}]}).toArray())){let e=r.collection("order"),i=await e.findOne({$and:[{worker:a.email},{date:t}]});if(console.log({order:i}),!i)return s.close(),JSON.parse(JSON.stringify(a))}return s.close(),{}}let c=(0,s.registerServerReference)("072968937d72af519230d2a43691d6e81586f679",l);async function l(e){let{database:t,client:r}=await (0,a.default)(),s=t.collection("order"),i=await s.insertOne({...e,status:"pending"});return console.log({order:i}),r.close(),JSON.parse(JSON.stringify(i))}let u=(0,s.registerServerReference)("18ce25f48cfdcff1e8e1d068e79dd0e03629b824",h);async function h(e){let{database:t,client:r}=await (0,a.default)(),s=t.collection("order"),i=await s.find({email:e}).toArray();return console.log({order:i}),r.close(),JSON.parse(JSON.stringify(i))}let f=(0,s.registerServerReference)("b811366656e3aad9ca4d5bc3ad24da57723bbb4a",b);async function b(){let{database:e,client:t}=await (0,a.default)(),r=e.collection("order"),s=await r.find().toArray();return console.log({order:s}),t.close(),JSON.parse(JSON.stringify(s))}let p=(0,s.registerServerReference)("a7e8291d1bdcec957a9547e446b86b28d5cf22df",g);async function g(e){let{database:t,client:r}=await (0,a.default)(),s=t.collection("order"),i=await s.find({worker:e}).toArray();return console.log({order:i}),r.close(),JSON.parse(JSON.stringify(i))}let m=(0,s.registerServerReference)("963e7b59c50153e0fdad62679fe297a96352837a",x);async function x(e,t){let{database:r,client:s}=await (0,a.default)(),i=r.collection("order"),n=await i.updateOne({...e},{$set:{status:t}});return console.log({order:n}),s.close(),JSON.parse(JSON.stringify(n))}let O=(0,s.registerServerReference)("e22f0f872921c08064859548dcf4f27623b0971b",v);async function v(e){console.log({id:e});let{database:t,client:r}=await (0,a.default)(),s=t.collection("order");var n=new i.ObjectId(e);let o=await s.findOne({_id:n});return console.log({order:o}),r.close(),JSON.parse(JSON.stringify(o))}(0,n.ensureServerEntryExports)([o,c,u,f,p,m,O]),(0,s.registerServerReference)("2b5f27bb77a493a536153c35bc92da67448bbf00",o),(0,s.registerServerReference)("604a5f53a386e7d884ceb4e637d9db4dde083582",c),(0,s.registerServerReference)("cebd14fc41c69c7d1b4b0d283ed367f82ad15ead",u),(0,s.registerServerReference)("aa60c369216bcb2edf713d1d760271767fc5a6b6",f),(0,s.registerServerReference)("108866074a754ba62450c20513e6d7aa9f0ae0d5",p),(0,s.registerServerReference)("0e2da7323e643dc8502d779a9be0ee215a5adedb",m),(0,s.registerServerReference)("87811bda8aab4f2c40c29da1aea7294596397243",O)},20915:(e,t,r)=>{r.d(t,{default:()=>i});var s=r(38013);let i=async()=>{let e=new s.MongoClient("mongodb+srv://basitdev:Z8TTCBtR5z0z76QC@domestic-ease-cluster.ygthspq.mongodb.net/");try{await e.connect();let t=e.db("domestic-ease-client");return console.log("Connected to MongoDB"),{client:e,database:t}}catch(e){console.error(e)}}},73881:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var s=r(70337);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},67230:(e,t,r)=>{r.d(t,{h:()=>o});var s=r(23353),i=r(95459),a=r(4308),n=r(95344),o=(0,i.G)((e,t)=>{let r=(0,s.p)();return(0,n.jsx)(a.m.thead,{...e,ref:t,__css:r.thead})})},23353:(e,t,r)=>{r.d(t,{i:()=>h,p:()=>u});var s=r(95459),i=r(21092),a=r(89320),n=r(4308),o=r(39689),d=r(23175),c=r(95344),[l,u]=(0,d.k)({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),h=(0,s.G)((e,t)=>{let r=(0,i.jC)("Table",e),{className:s,layout:d,...u}=(0,a.Lr)(e);return(0,c.jsx)(l,{value:r,children:(0,c.jsx)(n.m.table,{ref:t,__css:{tableLayout:d,...r.table},className:(0,o.cx)("chakra-table",s),...u})})});h.displayName="Table"},47865:(e,t,r)=>{r.d(t,{Tr:()=>o});var s=r(23353),i=r(95459),a=r(4308),n=r(95344),o=(0,i.G)((e,t)=>{let r=(0,s.p)();return(0,n.jsx)(a.m.tr,{...e,ref:t,__css:r.tr})})},72764:(e,t,r)=>{r.d(t,{p:()=>o});var s=r(23353),i=r(95459),a=r(4308),n=r(95344),o=(0,i.G)((e,t)=>{let r=(0,s.p)();return(0,n.jsx)(a.m.tbody,{...e,ref:t,__css:r.tbody})})},9480:(e,t,r)=>{r.d(t,{Th:()=>o});var s=r(23353),i=r(95459),a=r(4308),n=r(95344),o=(0,i.G)(({isNumeric:e,...t},r)=>{let i=(0,s.p)();return(0,n.jsx)(a.m.th,{...t,ref:r,__css:i.th,"data-is-numeric":e})})},25684:(e,t,r)=>{r.d(t,{Td:()=>o});var s=r(23353),i=r(95459),a=r(4308),n=r(95344),o=(0,i.G)(({isNumeric:e,...t},r)=>{let i=(0,s.p)();return(0,n.jsx)(a.m.td,{...t,ref:r,__css:i.td,"data-is-numeric":e})})},31296:(e,t,r)=>{r.d(t,{D:()=>u});var s=r(3729),i=r(99896),a=r(41466),n=r(80057),o=r(28651),d=class extends n.l{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#a()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#i(){let e=this.#r?.state??(0,i.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){a.V.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#s.onSuccess?.(e.data,t,r),this.#s.onSettled?.(e.data,null,t,r)):e?.type==="error"&&(this.#s.onError?.(e.error,t,r),this.#s.onSettled?.(void 0,e.error,t,r))}this.listeners.forEach(e=>{e(this.#t)})})}},c=r(26274),l=r(63701);function u(e,t){let r=(0,c.NL)(t),[i]=s.useState(()=>new d(r,e));s.useEffect(()=>{i.setOptions(e)},[i,e]);let n=s.useSyncExternalStore(s.useCallback(e=>i.subscribe(a.V.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=s.useCallback((e,t)=>{i.mutate(e,t).catch(l.Z)},[i]);if(n.error&&(0,l.L)(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}}};