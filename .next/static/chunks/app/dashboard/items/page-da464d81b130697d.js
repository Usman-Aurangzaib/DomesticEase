(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1123],{9395:function(t,e,i){Promise.resolve().then(i.bind(i,69))},3472:function(t,e,i){"use strict";Object.defineProperty(e,"$",{enumerable:!0,get:function(){return n}});let s=i(5355);function n(t){let{createServerReference:e}=i(6671);return e(t,s.callServer)}},7199:function(t,e,i){"use strict";i.d(e,{Nx:function(){return a},w1:function(){return r},wz:function(){return n}}),i(5355);var s=i(3472),n=(0,s.$)("b00cee09535d9f0ede905d26ffdfec2302265df0"),r=(0,s.$)("9f3ec1c38ffdd9630ed8e638c0c67f95d95de8d0"),a=(0,s.$)("42144440996ad4efe346e042b91a40b17d1bb67e")},6518:function(t,e,i){"use strict";i.d(e,{AW:function(){return c},FA:function(){return d},Nq:function(){return l},PR:function(){return o},Re:function(){return a},bG:function(){return u},h8:function(){return n},r4:function(){return r}}),i(5355);var s=i(3472),n=(0,s.$)("9c3fff7bc34ea049ee987a3faad47491f6dcc742"),r=(0,s.$)("0f4d132821da063e73dee58ac0271c6b416dbe08"),a=(0,s.$)("2727ff5f424dc69ed443f01d95876fa2ea974c6d"),o=(0,s.$)("830a08f0b4898aa4d63fb94229055f2fce3e3f71"),u=(0,s.$)("e80969a57efceefee6a8a65908e1e314fe49a2a0"),l=(0,s.$)("ae483d5d3c1e2e20ae95a2933fab40df31f7512a"),c=(0,s.$)("a8dbe559b9e3e82e687aabcfe7c2bab9f020568c"),d=(0,s.$)("59975b62b53c5f40ad91cc17f309d881c82b0209")},69:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return M}});var s=i(7437),n=i(6518),r=i(4741),a=i(4285),o=i(7895),u=i(3518),l=i(9623),c=i(7727),d=i(8542),h=i(2540),f=i(6956),p=i(5426),m=i(8633),v=i(2973),x=i(7082),b=i(4642),y=i(568),g=i(2265),j=i(7199),C=i(209),w=i(4873),S=i(6129),O=i(129),R=i(653),T=i(2250),k=i(1957),I=function(t){let{show:e,setNull:i}=t,n=(0,r.p)(),[c,d]=(0,g.useState)(""),[h,f]=(0,g.useState)(""),[p,m]=(0,g.useState)(""),[v,x]=(0,g.useState)(""),{mutate:b,isPending:I}=(0,y.D)({mutationFn:async t=>{await (0,j.w1)({name:c,description:h,price:p,imageName:t}),n({title:"Item added",status:"success",duration:9e3,isClosable:!0}),i()}}),M=async t=>{var e,i,s;if(t.preventDefault(),!c||!h||!p||!v){n({title:"Please fill all fields",status:"error",duration:9e3,isClosable:!0});return}let r=new FormData;if(r.append("file",t.target.file.files[0]),(null===(s=t.target.file)||void 0===s?void 0:null===(i=s.files)||void 0===i?void 0:null===(e=i[0])||void 0===e?void 0:e.size)>8388608)return;let a=await fetch("/api/upload-image",{method:"POST",body:r}),o=(await a.json()).name;await b(o)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.u_,{onClose:i,isOpen:e,isCentered:!0,size:"xl",children:[(0,s.jsx)(w.Z,{}),(0,s.jsxs)(S.h,{children:[(0,s.jsx)(O.x,{children:"Order"}),(0,s.jsx)(R.o,{}),(0,s.jsx)(T.f,{children:(0,s.jsxs)(a.k,{direction:"column",width:"100%",justifyContent:"center",alignItems:"center",marginY:10,children:[(0,s.jsx)(o.x,{fontSize:"x-large",fontWeight:"bold",children:"Add item to shop"}),(0,s.jsx)("form",{className:" max-w-96",onSubmit:M,children:(0,s.jsxs)(a.k,{direction:"column",width:"100%",gap:2,justifyContent:"center",alignItems:"center",children:[(0,s.jsx)(u.I,{width:500,type:"text",placeholder:"Name",onChange:t=>d(t.target.value),value:c}),(0,s.jsx)(u.I,{width:500,type:"text",placeholder:"Description",onChange:t=>f(t.target.value),value:h}),(0,s.jsx)(u.I,{width:500,type:"text",placeholder:"Price",onChange:t=>m(t.target.value),value:p}),(0,s.jsx)(u.I,{width:500,type:"file",name:"file",accept:"image/*",onChange:t=>x(t.target.value)}),(0,s.jsx)(l.z,{width:500,colorScheme:"teal",type:"submit",isLoading:I,children:"Add item"})]})})]})}),(0,s.jsx)(k.m,{children:(0,s.jsx)(l.z,{w:"100%",onClick:i,children:"Close"})})]})]})})},M=()=>{let t=(0,x.NL)(),[e,i]=(0,g.useState)(!1),[C,w]=(0,g.useState)(!1),{data:S,isLoading:O}=(0,b.a)({queryKey:["items-admin"],queryFn:async()=>(0,j.Nx)()}),{mutate:R}=(0,y.D)({mutationFn:async t=>{await (0,n.h8)(t)},onSuccess:()=>{t.invalidateQueries({queryKey:["users-admin"]})}}),T=(0,r.p)();return(0,s.jsxs)(a.k,{flexDir:"column",gap:8,maxHeight:"95vh",overflowY:"scroll",w:"100%",children:[(0,s.jsx)(I,{show:e,setNull:()=>i(!1)}),(0,s.jsx)(o.x,{fontWeight:"bold",fontSize:"xx-large",px:8,pt:8,pb:0,children:"Shop items list"}),(0,s.jsxs)(a.k,{w:"100%",gap:4,paddingX:4,children:[(0,s.jsx)(u.I,{placeholder:"Search"}),(0,s.jsx)(l.z,{colorScheme:"blue",w:"200px",onClick:()=>{i(!0)},children:"Add Item"})]}),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(c.i,{variant:"simple",size:"md",width:"full",children:[(0,s.jsx)(d.h,{children:(0,s.jsxs)(h.Tr,{children:[(0,s.jsx)(f.Th,{children:"NAME"}),(0,s.jsx)(f.Th,{children:"DESCRIPTION"}),(0,s.jsx)(f.Th,{children:"PRICE"}),(0,s.jsx)(f.Th,{children:"IMAGE"}),(0,s.jsx)(f.Th,{children:"ACTION"})]})}),(0,s.jsxs)(p.p,{children:[O&&(0,s.jsx)(m.$,{}),null==S?void 0:S.map(t=>{var e,i,n;return(0,s.jsxs)(h.Tr,{children:[(0,s.jsx)(v.Td,{children:null!==(e=t.name)&&void 0!==e?e:"Empty"}),(0,s.jsx)(v.Td,{children:null!==(i=t.description)&&void 0!==i?i:"Empty"}),(0,s.jsx)(v.Td,{children:null!==(n=t.price)&&void 0!==n?n:"Empty"}),(0,s.jsx)(v.Td,{children:(0,s.jsx)("img",{src:"/api/get-image/".concat(t.imageName),alt:"",width:50,height:50,style:{objectFit:"contain",width:"50px",height:"50px",maxWidth:"50px"}})}),(0,s.jsx)(v.Td,{children:(0,s.jsx)(l.z,{isLoading:C,onClick:async()=>{w(!0),await (0,j.wz)(t._id),w(!1),T({title:"Item deleted, please refresh the page",status:"success",duration:9e3,isClosable:!0})},colorScheme:"red",children:"Delete"})})]},t._id)})]})]})})]})}},5700:function(t,e,i){"use strict";i.d(e,{Y:function(){return v}});var s=i(8608),n=i(6881),r=i(9030),a=i(6335),o=i(1073),u=i(9367),l=i(7362),c=i(2265),d=i(7437),[h,f]=(0,s.k)({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),[p,m]=(0,s.k)({strict:!1,name:"FormControlContext"});function v(t){let{isDisabled:e,isInvalid:i,isReadOnly:s,isRequired:n,...r}=function(t){var e,i,s;let n=m(),{id:r,disabled:a,readOnly:o,required:u,isRequired:c,isInvalid:d,isReadOnly:h,isDisabled:f,onFocus:p,onBlur:v,...x}=t,b=t["aria-describedby"]?[t["aria-describedby"]]:[];return(null==n?void 0:n.hasFeedbackText)&&(null==n?void 0:n.isInvalid)&&b.push(n.feedbackId),(null==n?void 0:n.hasHelpText)&&b.push(n.helpTextId),{...x,"aria-describedby":b.join(" ")||void 0,id:null!=r?r:null==n?void 0:n.id,isDisabled:null!=(e=null!=a?a:f)?e:null==n?void 0:n.isDisabled,isReadOnly:null!=(i=null!=o?o:h)?i:null==n?void 0:n.isReadOnly,isRequired:null!=(s=null!=u?u:c)?s:null==n?void 0:n.isRequired,isInvalid:null!=d?d:null==n?void 0:n.isInvalid,onFocus:(0,l.v0)(null==n?void 0:n.onFocus,p),onBlur:(0,l.v0)(null==n?void 0:n.onBlur,v)}}(t);return{...r,disabled:e,readOnly:s,required:n,"aria-invalid":(0,l.Qm)(i),"aria-required":(0,l.Qm)(n),"aria-readonly":(0,l.Qm)(s)}}(0,r.G)(function(t,e){let i=(0,a.jC)("Form",t),{getRootProps:s,htmlProps:r,...f}=function(t){let{id:e,isRequired:i,isInvalid:s,isDisabled:r,isReadOnly:a,...o}=t,u=(0,c.useId)(),d=e||"field-".concat(u),h="".concat(d,"-label"),f="".concat(d,"-feedback"),p="".concat(d,"-helptext"),[m,v]=(0,c.useState)(!1),[x,b]=(0,c.useState)(!1),[y,g]=(0,c.useState)(!1),j=(0,c.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{id:p,...t,ref:(0,n.lq)(e,t=>{t&&b(!0)})}},[p]),C=(0,c.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:e,"data-focus":(0,l.PB)(y),"data-disabled":(0,l.PB)(r),"data-invalid":(0,l.PB)(s),"data-readonly":(0,l.PB)(a),id:void 0!==t.id?t.id:h,htmlFor:void 0!==t.htmlFor?t.htmlFor:d}},[d,r,y,s,a,h]),w=(0,c.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{id:f,...t,ref:(0,n.lq)(e,t=>{t&&v(!0)}),"aria-live":"polite"}},[f]),S=(0,c.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,...o,ref:e,role:"group","data-focus":(0,l.PB)(y),"data-disabled":(0,l.PB)(r),"data-invalid":(0,l.PB)(s),"data-readonly":(0,l.PB)(a)}},[o,r,y,s,a]);return{isRequired:!!i,isInvalid:!!s,isReadOnly:!!a,isDisabled:!!r,isFocused:!!y,onFocus:()=>g(!0),onBlur:()=>g(!1),hasFeedbackText:m,setHasFeedbackText:v,hasHelpText:x,setHasHelpText:b,id:d,labelId:h,feedbackId:f,helpTextId:p,htmlProps:o,getHelpTextProps:j,getErrorMessageProps:w,getRootProps:S,getLabelProps:C,getRequiredIndicatorProps:(0,c.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:e,role:"presentation","aria-hidden":!0,children:t.children||"*"}},[])}}((0,o.Lr)(t)),m=(0,l.cx)("chakra-form-control",t.className);return(0,d.jsx)(p,{value:f,children:(0,d.jsx)(h,{value:i,children:(0,d.jsx)(u.m.div,{...s({},e),className:m,__css:i.container})})})}).displayName="FormControl",(0,r.G)(function(t,e){let i=m(),s=f(),n=(0,l.cx)("chakra-form__helper-text",t.className);return(0,d.jsx)(u.m.div,{...null==i?void 0:i.getHelpTextProps(t,e),__css:s.helperText,className:n})}).displayName="FormHelperText"},3518:function(t,e,i){"use strict";i.d(e,{I:function(){return c}});var s=i(5700),n=i(9030),r=i(6335),a=i(1073),o=i(9367),u=i(7362),l=i(7437),c=(0,n.G)(function(t,e){let{htmlSize:i,...n}=t,c=(0,r.jC)("Input",n),d=(0,a.Lr)(n),h=(0,s.Y)(d),f=(0,u.cx)("chakra-input",t.className);return(0,l.jsx)(o.m.input,{size:i,...h,__css:c.field,ref:e,className:f})});c.displayName="Input",c.id="Input"},8542:function(t,e,i){"use strict";i.d(e,{h:function(){return o}});var s=i(7727),n=i(9030),r=i(9367),a=i(7437),o=(0,n.G)((t,e)=>{let i=(0,s.p)();return(0,a.jsx)(r.m.thead,{...t,ref:e,__css:i.thead})})},7727:function(t,e,i){"use strict";i.d(e,{i:function(){return h},p:function(){return d}});var s=i(9030),n=i(6335),r=i(1073),a=i(9367),o=i(7362),u=i(8608),l=i(7437),[c,d]=(0,u.k)({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),h=(0,s.G)((t,e)=>{let i=(0,n.jC)("Table",t),{className:s,layout:u,...d}=(0,r.Lr)(t);return(0,l.jsx)(c,{value:i,children:(0,l.jsx)(a.m.table,{ref:e,__css:{tableLayout:u,...i.table},className:(0,o.cx)("chakra-table",s),...d})})});h.displayName="Table"},2540:function(t,e,i){"use strict";i.d(e,{Tr:function(){return o}});var s=i(7727),n=i(9030),r=i(9367),a=i(7437),o=(0,n.G)((t,e)=>{let i=(0,s.p)();return(0,a.jsx)(r.m.tr,{...t,ref:e,__css:i.tr})})},5426:function(t,e,i){"use strict";i.d(e,{p:function(){return o}});var s=i(7727),n=i(9030),r=i(9367),a=i(7437),o=(0,n.G)((t,e)=>{let i=(0,s.p)();return(0,a.jsx)(r.m.tbody,{...t,ref:e,__css:i.tbody})})},6956:function(t,e,i){"use strict";i.d(e,{Th:function(){return o}});var s=i(7727),n=i(9030),r=i(9367),a=i(7437),o=(0,n.G)((t,e)=>{let{isNumeric:i,...n}=t,o=(0,s.p)();return(0,a.jsx)(r.m.th,{...n,ref:e,__css:o.th,"data-is-numeric":i})})},2973:function(t,e,i){"use strict";i.d(e,{Td:function(){return o}});var s=i(7727),n=i(9030),r=i(9367),a=i(7437),o=(0,n.G)((t,e)=>{let{isNumeric:i,...n}=t,o=(0,s.p)();return(0,a.jsx)(r.m.td,{...n,ref:e,__css:o.td,"data-is-numeric":i})})},4741:function(t,e,i){"use strict";i.d(e,{p:function(){return o}});var s=i(8504),n=i(750),r=i(2032),a=i(2265);function o(t){let{theme:e}=(0,r.uP)(),i=(0,s.OX)();return(0,a.useMemo)(()=>(0,n.Cj)(e.direction,{...i,...t}),[t,e.direction,i])}},1793:function(t,e,i){"use strict";i.d(e,{R:function(){return o},m:function(){return a}});var s=i(5139),n=i(2041),r=i(326),a=class extends n.F{#t;#e;#i;#s;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.defaultOptions,this.#i=t.mutationCache,this.#t=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.#e,...t},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#i.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#i.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||("pending"===this.state.status?this.scheduleGc():this.#i.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){let e="pending"===this.state.status;try{if(!e){this.#n({type:"pending",variables:t}),await this.#i.config.onMutate?.(t,this);let e=await this.options.onMutate?.(t);e!==this.state.context&&this.#n({type:"pending",context:e,variables:t})}let i=await (this.#s=(0,r.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#n({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.#s.promise);return await this.#i.config.onSuccess?.(i,t,this.state.context,this),await this.options.onSuccess?.(i,t,this.state.context),await this.#i.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,t,this.state.context),this.#n({type:"success",data:i}),i}catch(e){try{throw await this.#i.config.onError?.(e,t,this.state.context,this),await this.options.onError?.(e,t,this.state.context),await this.#i.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,e,t,this.state.context),e}finally{this.#n({type:"error",error:e})}}}#n(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!(0,r.Kw)(this.options.networkMode),status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),s.V.batch(()=>{this.#t.forEach(e=>{e.onMutationUpdate(t)}),this.#i.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},568:function(t,e,i){"use strict";i.d(e,{D:function(){return d}});var s=i(2265),n=i(1793),r=i(5139),a=i(4614),o=i(6063),u=class extends a.l{#r;#a=void 0;#o;#u;constructor(t,e){super(),this.#r=t,this.setOptions(e),this.bindMethods(),this.#l()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#r.defaultMutationOptions(t),(0,o.VS)(this.options,e)||this.#r.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#o,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(e.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#o?.state.status==="pending"&&this.#o.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#o?.removeObserver(this)}onMutationUpdate(t){this.#l(),this.#c(t)}getCurrentResult(){return this.#a}reset(){this.#o?.removeObserver(this),this.#o=void 0,this.#l(),this.#c()}mutate(t,e){return this.#u=e,this.#o?.removeObserver(this),this.#o=this.#r.getMutationCache().build(this.#r,this.options),this.#o.addObserver(this),this.#o.execute(t)}#l(){let t=this.#o?.state??(0,n.R)();this.#a={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#c(t){r.V.batch(()=>{if(this.#u&&this.hasListeners()){let e=this.#a.variables,i=this.#a.context;t?.type==="success"?(this.#u.onSuccess?.(t.data,e,i),this.#u.onSettled?.(t.data,null,e,i)):t?.type==="error"&&(this.#u.onError?.(t.error,e,i),this.#u.onSettled?.(void 0,t.error,e,i))}this.listeners.forEach(t=>{t(this.#a)})})}},l=i(7082),c=i(826);function d(t,e){let i=(0,l.NL)(e),[n]=s.useState(()=>new u(i,t));s.useEffect(()=>{n.setOptions(t)},[n,t]);let a=s.useSyncExternalStore(s.useCallback(t=>n.subscribe(r.V.batchCalls(t)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=s.useCallback((t,e)=>{n.mutate(t,e).catch(c.Z)},[n]);if(a.error&&(0,c.L)(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}}},function(t){t.O(0,[1571,8633,8618,4642,3104,8504,3232,2971,8069,1744],function(){return t(t.s=9395)}),_N_E=t.O()}]);