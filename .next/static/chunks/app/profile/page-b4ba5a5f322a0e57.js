(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{8250:function(e,t,a){Promise.resolve().then(a.bind(a,2509))},8045:function(e,t,a){"use strict";a.d(t,{T:function(){return l}});let l=[{label:"Electrician services",value:"electrician"},{label:"Plumber services",value:"plumber"},{label:"Home cleaning services",value:"home_cleaning"},{label:"Car cleaning and maintenance services",value:"car_cleaning"},{label:"Pest control services",value:"pest_control"},{label:"Carpentry services",value:"carpentry"}]},6518:function(e,t,a){"use strict";a.d(t,{AW:function(){return o},FA:function(){return d},Nq:function(){return u},PR:function(){return s},Re:function(){return i},bG:function(){return c},h8:function(){return n},r4:function(){return r}}),a(5355);var l=a(3472),n=(0,l.$)("9c3fff7bc34ea049ee987a3faad47491f6dcc742"),r=(0,l.$)("0f4d132821da063e73dee58ac0271c6b416dbe08"),i=(0,l.$)("2727ff5f424dc69ed443f01d95876fa2ea974c6d"),s=(0,l.$)("830a08f0b4898aa4d63fb94229055f2fce3e3f71"),c=(0,l.$)("e80969a57efceefee6a8a65908e1e314fe49a2a0"),u=(0,l.$)("ae483d5d3c1e2e20ae95a2933fab40df31f7512a"),o=(0,l.$)("a8dbe559b9e3e82e687aabcfe7c2bab9f020568c"),d=(0,l.$)("59975b62b53c5f40ad91cc17f309d881c82b0209")},5402:function(e,t,a){"use strict";a.d(t,{M:function(){return s},a:function(){return c}});var l=a(7437),n=a(7907),r=a(2265);let i=(0,r.createContext)(null),s=e=>{let{children:t}=e,[a,s]=(0,r.useState)(""),c=(0,n.usePathname)(),u=(0,n.useRouter)();return(0,r.useEffect)(()=>{let e=localStorage.getItem("domestic-user");e?s(e):("/book"===c||"/profile"===c||"/dashboard"===c)&&u.push("/")},[]),(0,l.jsx)(i.Provider,{value:{user:a,setUser:s,logout:()=>{localStorage.removeItem("domestic-user"),s(""),u.push("/")}},children:t})},c=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useUser must be used within a UserWrapper");return e}},2509:function(e,t,a){"use strict";a.r(t);var l=a(7437),n=a(5402),r=a(6518),i=a(7082),s=a(4642),c=a(4741),u=a(4285),o=a(8633),d=a(7895),h=a(3518),g=a(3738),p=a(9623),f=a(2265),m=a(7907),v=a(8045),x=a(703);t.default=()=>{let{user:e}=(0,n.a)();(0,i.NL)();let[t,a]=(0,f.useState)(""),[b,j]=(0,f.useState)(""),[w,y]=(0,f.useState)(""),[C,I]=(0,f.useState)(""),[S,P]=(0,f.useState)(""),[k,z]=(0,f.useState)(""),[A,N]=(0,f.useState)(""),[U,$]=(0,f.useState)(""),[_,E]=(0,f.useState)(v.T[0].value),W=(0,c.p)(),[q,R]=(0,f.useState)(!1),[T,F]=(0,f.useState)(""),{data:Y,isLoading:L}=(0,s.a)({queryKey:["userdetails",e],queryFn:async()=>{let t=await (0,r.bG)(e);return a(t.email),F(t.password),j(t.name),I(t.phone),P(t.address),z(t.city),N(t.state),$(t.zip),E(t.service),t}}),O=(0,m.useRouter)(),B=async e=>{e.preventDefault(),R(!0);try{let a=null;if(e.target.file.files[0]){if(e.target.file.files[0].size>8388608){W({title:"Image size should be less than 8MB",status:"error",duration:9e3,isClosable:!0});return}let t=new FormData;t.append("file",e.target.file.files[0]);let l=await fetch("/api/upload-image",{method:"POST",body:t});a=(await l.json()).name}"service"===Y.type?await (0,r.Nq)(t,{name:b,phone:C,address:S,city:k,state:A,zip:U,password:T,service:_,image:a||Y.image}):await (0,r.Nq)(t,{password:T,image:a||Y.image,name:b,phone:C,address:S,city:k,state:A,zip:U}),W({title:"Account updated.",description:"Your account has been updated successfully.",status:"success",duration:9e3,isClosable:!0}),O.push("/profile")}catch(e){}R(!1)};return L?(0,l.jsx)(u.k,{gap:2,width:"100%",marginY:10,justifyContent:"center",children:(0,l.jsx)(o.$,{size:"xl"})}):"service"===Y.type?(0,l.jsxs)(u.k,{direction:"column",width:"100%",justifyContent:"center",alignItems:"center",marginY:10,children:[(0,l.jsx)(d.x,{fontSize:"x-large",fontWeight:"bold",textAlign:"center",children:"Update Service Provider Information"}),(0,l.jsxs)("form",{onSubmit:B,style:{maxWidth:"500px",width:"100%"},children:[(0,l.jsx)(x.default,{src:"/api/get-image/".concat(Y.image),width:200,height:200,alt:"image",style:{margin:"auto",border:"1px solid rgba(200,200,200,0.5)",maxHeight:"200px",maxWidth:"200px",objectFit:"cover",borderRadius:"10%"}}),(0,l.jsxs)(u.k,{paddingTop:2,gap:2,direction:"column",width:"100%",justifyContent:"center",alignItems:"center",children:[(0,l.jsx)(h.I,{width:"100%",type:"text",value:b,placeholder:"Name",onChange:e=>{!(e.target.value.length>20)&&(e.target.value.match(/[^a-zA-Z\s]/g)||j(e.target.value))}}),(0,l.jsx)(h.I,{width:"100%",disabled:!0,value:t,type:"email",placeholder:"Email",onChange:e=>a(e.target.value)}),(0,l.jsx)(h.I,{width:"100%",type:"password",value:T,placeholder:"Password",onChange:e=>F(e.target.value)}),(0,l.jsx)(h.I,{width:"100%",type:"number",value:C,placeholder:"Phone",onChange:e=>{!(e.target.value.length>12)&&(e.target.value.match(/[^0-9]/g)||I(e.target.value))}}),(0,l.jsx)(h.I,{width:"100%",type:"text",value:S,placeholder:"Address",onChange:e=>P(e.target.value)}),(0,l.jsx)(h.I,{width:"100%",type:"text",value:k,placeholder:"City",onChange:e=>z(e.target.value)}),(0,l.jsxs)(u.k,{gap:2,width:"100%",justifyContent:"center",alignItems:"center",children:[(0,l.jsx)(h.I,{width:"100%",type:"text",value:A,placeholder:"State",onChange:e=>N(e.target.value)}),(0,l.jsx)(h.I,{width:"100%",type:"text",value:U,placeholder:"Postal code",onChange:e=>{!(e.target.value.length>6)&&(e.target.value.match(/[^0-9]/g)||$(e.target.value))}})]}),(0,l.jsx)(g.P,{value:_,onChange:e=>E(e.target.value),width:"100%",placeholder:"Select service",children:v.T.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,l.jsx)(d.x,{fontSize:"large",children:"Update Image"}),(0,l.jsx)(h.I,{width:"100%",type:"file",name:"file",accept:"image/*",placeholder:"Image",onChange:e=>y(e.target.value)}),(0,l.jsx)(p.z,{width:"100%",colorScheme:"teal",type:"submit",isLoading:q,children:"Update Account"}),(0,l.jsx)(p.z,{width:"100%",colorScheme:"red",type:"button",onClick:()=>O.push("/user"),children:"Back"})]})]})]}):(0,l.jsxs)(u.k,{direction:"column",width:"100%",justifyContent:"center",alignItems:"center",marginY:10,children:[(0,l.jsx)(d.x,{fontSize:"x-large",fontWeight:"bold",textAlign:"center",children:"Update User Information"}),(0,l.jsx)("form",{onSubmit:B,style:{maxWidth:"500px",width:"100%"},children:(0,l.jsxs)(u.k,{direction:"column",width:"100%",justifyContent:"center",alignItems:"center",gap:2,children:[(0,l.jsx)(h.I,{width:"100%",type:"text",value:b,placeholder:"Name",onChange:e=>{!(e.target.value.length>20)&&(e.target.value.match(/[^a-zA-Z\s]/g)||j(e.target.value))}}),(0,l.jsx)(h.I,{width:"100%",type:"email",disabled:!0,value:t,placeholder:"Email",onChange:e=>a(e.target.value)}),(0,l.jsx)(h.I,{width:"100%",type:"password",value:T,placeholder:"Password",onChange:e=>F(e.target.value)}),(0,l.jsx)(h.I,{width:"100%",type:"number",value:C,placeholder:"Phone",onChange:e=>{e.target.value.length>12||I(e.target.value)}}),(0,l.jsx)(h.I,{width:"100%",type:"text",value:S,placeholder:"Address",onChange:e=>P(e.target.value)}),(0,l.jsx)(h.I,{width:"100%",type:"text",value:k,placeholder:"City",onChange:e=>z(e.target.value)}),(0,l.jsx)(h.I,{width:"100%",type:"text",value:U,placeholder:"Postal code",onChange:e=>{!(e.target.value.length>6)&&(e.target.value.match(/[^0-9]/g)||$(e.target.value))}}),(0,l.jsx)(d.x,{fontSize:"large",children:"Update Image"}),(0,l.jsx)(h.I,{width:"100%",type:"file",name:"file",accept:"image/*",placeholder:"Image",onChange:e=>y(e.target.value)}),(0,l.jsx)(p.z,{width:"100%",colorScheme:"teal",type:"submit",isLoading:q,children:"Update Account"})]})})]})}}},function(e){e.O(0,[1571,8633,8618,4642,3104,8504,1409,240,2971,8069,1744],function(){return e(e.s=8250)}),_N_E=e.O()}]);